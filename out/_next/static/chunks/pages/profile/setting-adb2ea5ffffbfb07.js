(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[270],{9094:function(e,r,n){"use strict";n.d(r,{M:function(){return v}});var t=n(67294),i=n(3857),o=n(97818),l=n(48427),s=n(74459),a=Object.defineProperty,c=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,f=(e,r,n)=>r in e?a(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n;const p=(0,t.forwardRef)(((e,r)=>{const n=(0,i.N4)("Center",{},e),{inline:l,sx:a}=n,p=((e,r)=>{var n={};for(var t in e)u.call(e,t)&&r.indexOf(t)<0&&(n[t]=e[t]);if(null!=e&&c)for(var t of c(e))r.indexOf(t)<0&&d.call(e,t)&&(n[t]=e[t]);return n})(n,["inline","sx"]);return t.createElement(s.x,((e,r)=>{for(var n in r||(r={}))u.call(r,n)&&f(e,n,r[n]);if(c)for(var n of c(r))d.call(r,n)&&f(e,n,r[n]);return e})({ref:r,sx:[{display:l?"inline-flex":"flex",alignItems:"center",justifyContent:"center"},...(0,o.R)(a)]},p))}));p.displayName="@mantine/core/Center";const v=(0,l.F)(p)},68216:function(e,r,n){"use strict";n.d(r,{R:function(){return i}});var t=n(67294);function i(e){const r=(0,t.createContext)(null);return[({children:e,value:n})=>t.createElement(r.Provider,{value:n},e),()=>{const n=(0,t.useContext)(r);if(null===n)throw new Error(e);return n}]}},5266:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/setting",function(){return n(64733)}])},64733:function(e,r,n){"use strict";n.r(r);var t=n(34051),i=n.n(t),o=n(85893),l=n(41664),s=n(3857),a=n(67841),c=n(86462),u=n(66137),d=n(95117),f=n(97564),p=n(99985),v=n(19236),h=n(44991),m=n(9094),x=n(80471),g=n(83078),y=n(44765),j=n(22167),b=n(47516),w=n(67294),C=n(74922),k=n(11163);function S(e,r){(null==r||r>e.length)&&(r=e.length);for(var n=0,t=new Array(r);n<r;n++)t[n]=e[n];return t}function _(e,r,n,t,i,o,l){try{var s=e[o](l),a=s.value}catch(c){return void n(c)}s.done?r(a):Promise.resolve(a).then(t,i)}function O(e){return function(){var r=this,n=arguments;return new Promise((function(t,i){var o=e.apply(r,n);function l(e){_(o,t,i,l,s,"next",e)}function s(e){_(o,t,i,l,s,"throw",e)}l(void 0)}))}}function A(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"===typeof e)return S(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E=function(e){return new Promise((function(r,n){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){return r(t.result)},t.onerror=function(e){return n(e)}}))};r.default=function(){var e,r,n,t,S=(0,s.rZ)(),_=((0,k.useRouter)(),(0,g.Nr)()),N=_.Moralis,P=_.user,U=(_.setUserData,_.isUserUpdating,_.isInitialized),z=(_.refetchUserData,(0,w.useState)({image:"",file:void 0})),Z=z[0],D=z[1],R=(0,w.useState)(!1),I=R[0],F=R[1],M=(0,w.useState)(""),T=M[0],q=M[1],L=(0,g.Oc)("NewUser",(function(e){return e.equalTo("userAddress",null===P||void 0===P?void 0:P.get("ethAddress")).limit(1)}),[null===P||void 0===P?void 0:P.get("ethAddress")],{live:!0}),X=L.data;L.error,L.isLoading,L.isFetching,L.fetch;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l.default,{href:"/",passHref:!0,children:(0,o.jsx)(a.z,{variant:"outline",children:"Back"})}),(0,o.jsxs)(c.Z,{p:"lg",style:{backgroundColor:"dark"===S.colorScheme?S.colors.dark[9]:S.white,border:"1px solid",borderColor:S.colors.gray[7]},radius:"lg",mt:"sm",children:[(0,o.jsx)(u.Z,{position:"apart",align:"center",mb:"sm",children:(0,o.jsx)(d.x,{size:"lg",weight:"bold",align:"center",children:"Setting"})}),(0,o.jsx)(u.Z,{position:"center",align:"flex-start",children:(0,o.jsxs)(f.K,{align:"center",justify:"center",children:[(0,o.jsx)(p.q,{radius:"lg",color:"dark",mb:"sm",src:Z.image||(null===(r=null===(e=X[0])||void 0===e?void 0:e.get("profile_pic"))||void 0===r?void 0:r.url()),size:80,children:(0,o.jsx)(x.Mdg,{size:"100%"})}),(0,o.jsx)(v.D,{order:5,children:null===(n=X[0])||void 0===n?void 0:n.get("userName")}),(0,o.jsx)(d.x,{size:"sm",children:(null===(t=X[0])||void 0===t?void 0:t.get("description"))||"Default description"})]})}),(0,o.jsx)(u.Z,{position:"center",mt:"sm",children:(0,o.jsx)(h.o,{placeholder:"",label:"Set Description",required:!0,onChange:function(e){return q(e.target.value)},disabled:I})}),(0,o.jsx)(u.Z,{position:"center",mt:"sm",children:(0,o.jsx)(y.fh,{onDrop:function(){var e=O(i().mark((function e(r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(r[0]);case 2:n=e.sent,D({image:n,file:r[0]});case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),onReject:function(e){return console.log("rejected files",e)},accept:A(j.d1),style:{height:"80px",display:"flex",justifyContent:"center"},children:function(e){return(0,o.jsxs)(m.M,{children:[(0,o.jsx)(b.Zw4,{size:"80%"}),"Upload the new profile picture"]})}})}),(0,o.jsx)(u.Z,{position:"center",mt:"sm",children:(0,o.jsx)(a.z,{variant:"outline",loading:I,onClick:O(i().mark((function e(){var r,n,t,o,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=15;break}return F(!0),null===(r=X[0])||void 0===r||r.set("description",T),e.next=6,null===(n=X[0])||void 0===n?void 0:n.save();case 6:if(void 0===Z.file){e.next=12;break}return l=new N.File(Z.file.name,Z.file),null===(t=X[0])||void 0===t||t.set("profile_pic",l),e.next=12,null===(o=X[0])||void 0===o?void 0:o.save();case 12:(0,C.c0)({title:"Success",message:"User data updated",autoClose:2500,disallowClose:!0,color:"green"}),D({image:"",file:void 0}),F(!1);case 15:case"end":return e.stop()}}),e)}))),children:"Save"})})]})]})}}},function(e){e.O(0,[48,774,888,179],(function(){return r=5266,e(e.s=r);var r}));var r=e.O();_N_E=r}]);