(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{10303:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(40397)}])},40397:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Z}});var r=t(85893),i=t(67294),o=t(41664),s=t(67841),l=t(19236),d=t(11163),c=t(34051),u=t.n(c),a=t(3857),f=t(86462),h=t(66137),v=t(95117),g=t(49834),x=t(97564),m=t(99985),p=t(74459),w=t(8193),j=t(80471),y=t(3056),C=t(81621),z=t(49680),b=t.n(z);function k(e,n,t,r,i,o,s){try{var l=e[o](s),d=l.value}catch(c){return void t(c)}l.done?n(d):Promise.resolve(d).then(r,i)}function F(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function s(e){k(o,r,i,s,l,"next",e)}function l(e){k(o,r,i,s,l,"throw",e)}s(void 0)}))}}function _(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function E(){var e=_(["\n\t\t\tquery ProofQuery($from: String!, $to: String!) {\n\t\t\t\tconnections(fromAddr: $from, toAddrList: [$to], network: ETH) {\n\t\t\t\t\tfollowStatus {\n\t\t\t\t\t\tisFollowed\n\t\t\t\t\t\tisFollowing\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t"]);return E=function(){return e},e}function P(){var e=_(["\n\t\t\tquery IdentityQuery($address: String!) {\n\t\t\t\tidentity(address: $address, network: ETH) {\n\t\t\t\t\tfollowingCount\n\t\t\t\t\tfollowerCount\n\t\t\t\t}\n\t\t\t}\n\t\t"]);return P=function(){return e},e}var O=function(e){var n,t,d=(0,a.rZ)(),c=(0,i.useState)(!1),k=c[0],_=c[1],O=function(){var e=(0,i.useState)(),n=e[0],t=e[1];return(0,i.useEffect)((function(){if(window.ethereum){var e=new(b())({namespace:"CyberConnect",env:z.Env.PRODUCTION,chain:z.Blockchain.ETH,provider:window.ethereum,signingMessageEntity:"Greet"});t(e),console.log(e)}}),[]),n}(),N=(0,y.a)((0,C.Ps)(E()),{variables:{from:e.from,to:e.to}}),T=(0,y.a)((0,C.Ps)(P()),{variables:{address:e.to}}),A=(0,i.useMemo)((function(){var e,n,t;return null===(n=null===(e=N.data)||void 0===e?void 0:e.connections[0])||void 0===n||null===(t=n.followStatus)||void 0===t?void 0:t.isFollowing}),[N]),S=function(){var n=F(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return _(!0),n.next=3,null===O||void 0===O?void 0:O.connect(e.to,z.ConnectionType.FOLLOW);case 3:return n.next=5,N.refetch();case 5:return n.next=7,T.refetch();case 7:_(!1);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),H=function(){var n=F(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return _(!0),n.next=3,null===O||void 0===O?void 0:O.disconnect(e.to,z.ConnectionType.FOLLOW);case 3:return n.next=5,N.refetch();case 5:return n.next=7,T.refetch();case 7:_(!1);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),M=function(e){var n=e.followed;return(0,r.jsx)(r.Fragment,{children:n||void 0===n?(0,r.jsx)(s.z,{variant:"outline",onClick:H,hidden:void 0===n,loading:k,children:"Followed"}):(0,r.jsx)(s.z,{variant:"outline",onClick:S,hidden:void 0===n,loading:k,children:"Follow"})})};return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(f.Z,{p:"lg",style:{backgroundColor:"dark"===d.colorScheme?d.colors.dark[9]:d.white,border:"1px solid",borderColor:d.colors.gray[7]},radius:"lg",mt:"sm",children:[(0,r.jsxs)(h.Z,{position:"apart",align:"center",mb:"sm",children:[(0,r.jsx)(v.x,{size:"lg",weight:"bold",align:"center",children:"Profile"}),e.self&&(0,r.jsx)(o.default,{href:"/profile/setting",passHref:!0,children:(0,r.jsx)(g.A,{mr:"sm",size:"xl",children:(0,r.jsx)(w.zPD,{size:30})})})]}),(0,r.jsx)(h.Z,{position:"center",align:"flex-start",children:(0,r.jsxs)(x.K,{align:"center",justify:"center",children:[(0,r.jsx)(m.q,{radius:"lg",color:"dark",mb:"sm",size:80,src:e.image,children:(0,r.jsx)(j.Mdg,{size:"100%"})}),(0,r.jsx)(l.D,{order:5,children:e.userName}),e.description&&(0,r.jsx)(v.x,{size:"sm",children:e.description}),!e.self&&!N.loading&&(0,r.jsx)(M,{followed:A})]})}),(0,r.jsxs)(h.Z,{position:"center",mt:"md",children:[(0,r.jsxs)(p.x,{children:[(0,r.jsx)(v.x,{size:"sm",weight:"bold",align:"center",children:e.greetCount}),(0,r.jsx)(v.x,{size:"sm",align:"center",children:"Greets"})]}),(0,r.jsx)(o.default,{href:"/profile/followers?id=".concat(e.id),passHref:!0,children:(0,r.jsxs)(p.x,{style:{cursor:"pointer"},children:[(0,r.jsx)(v.x,{size:"sm",weight:"bold",align:"center",children:(null===(n=T.data)||void 0===n?void 0:n.identity.followerCount)||0}),(0,r.jsx)(v.x,{size:"sm",align:"center",children:"Followers"})]})}),(0,r.jsx)(o.default,{href:"/profile/following?id=".concat(e.id),passHref:!0,children:(0,r.jsxs)(p.x,{style:{cursor:"pointer"},children:[(0,r.jsx)(v.x,{size:"sm",weight:"bold",align:"center",children:(null===(t=T.data)||void 0===t?void 0:t.identity.followingCount)||0}),(0,r.jsx)(v.x,{size:"sm",align:"center",children:"Following"})]})})]})]})})},N=t(83078),T=t(49509),A=t(83025),S=t(65338),H=t(71217),M=t(40681),Z=(0,H.Pi)((function(){var e,n=(0,d.useRouter)().query.id,t=(0,M.s)(n),c=t.result,u=t.userName,a=t.greetCount,f=t.self,h=(t.loading,(0,S.dT)({userId:n})),v=h.feed,g=h.fetchMore,x=h.hasMore,m=(0,N.Nr)().user;return(0,i.useEffect)((function(){console.log(v)}),[v]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.default,{href:"/",passHref:!0,children:(0,r.jsx)(s.z,{variant:"outline",children:"Back"})}),(null===c||void 0===c?void 0:c.get("userAddress"))&&(null===m||void 0===m?void 0:m.get("ethAddress"))&&(0,r.jsx)(O,{userName:u,image:null===(e=null===c||void 0===c?void 0:c.get("profile_pic"))||void 0===e?void 0:e.url(),greetCount:a,description:null===c||void 0===c?void 0:c.get("description"),likeCount:0,self:f,id:n||void 0,from:null===m||void 0===m?void 0:m.get("ethAddress"),to:c.get("userAddress")}),v.length>0&&(0,r.jsxs)(l.D,{order:4,mt:"sm",ml:"sm",children:["All Greets from ",u]}),0!==v.length&&(0,r.jsx)(T.Z,{feeds:v||[],filter:A.D.Trending,isFollowing:!0,hasMore:x,fetchMore:g})]})}))},35883:function(){},71456:function(){},73105:function(){},55024:function(){}},function(e){e.O(0,[617,228,445,885,956,464,843,96,338,509,774,888,179],(function(){return n=10303,e(e.s=n);var n}));var n=e.O();_N_E=n}]);