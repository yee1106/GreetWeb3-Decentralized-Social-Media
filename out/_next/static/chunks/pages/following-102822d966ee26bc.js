(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[238],{41152:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/following",function(){return t(10110)}])},10110:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return b}});var r=t(85893),i=t(11163),u=t(34051),s=t.n(u),o=t(38090),a=t(95117),c=t(44991),l=t(20966),f=t(66137),d=t(67841),h=t(67294),v=t(83078),g=t(40326),p=t(48444),w=t(11466);function x(e,n,t,r,i,u,s){try{var o=e[u](s),a=o.value}catch(c){return void t(c)}o.done?n(a):Promise.resolve(a).then(r,i)}var m=function(e){e.open;var n=(0,i.useRouter)(),t=(0,h.useState)(""),u=t[0],m=t[1],b=(0,h.useState)(!1),_=b[0],j=b[1],k=(0,h.useState)(!1),S=k[0],y=k[1],C=(0,h.useState)(""),N=C[0],E=C[1],R=(0,h.useState)(!1),P=R[0],M=R[1],U=(0,v.Nr)(),F=U.Moralis,H=U.web3,L=F.web3Library,z=(0,v.Ab)().account,A=function(){var e,n=(e=s().mark((function e(){var n,t,r,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=function(e){return/\s/.test(e)},j(!0),j(!0),!n(u)){e.next=10;break}return y(!0),E("User name can't contain whitespace"),e.abrupt("return");case 10:if(""!==u){e.next=14;break}return y(!0),E("User name can't be empty"),e.abrupt("return");case 14:return e.prev=14,t=new w.CH(p.i.n,g.Mt,null===H||void 0===H?void 0:H.getSigner()),e.next=18,null===H||void 0===H?void 0:H.getGasPrice();case 18:return r=e.sent,i=L.utils.hexlify((null===r||void 0===r?void 0:r.mul(120).div(100))||0),e.next=22,t.registerNewUser(u,{gasLimit:L.utils.hexlify(5e5),gasPrice:i});case 22:return o=e.sent,e.next=25,o.wait();case 25:y(!1),j(!1),e.next=35;break;case 29:e.prev=29,e.t0=e.catch(14),j(!1),y(!0),E(e.t0.message),e.t0.data.message&&E(e.t0.data.message);case 35:case"end":return e.stop()}}),e,null,[[14,29]])})),function(){var n=this,t=arguments;return new Promise((function(r,i){var u=e.apply(n,t);function s(e){x(u,r,i,s,o,"next",e)}function o(e){x(u,r,i,s,o,"throw",e)}s(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,h.useEffect)((function(){new w.CH(p.i.n,g.Mt,null===H||void 0===H?void 0:H.getSigner()).isRegistered(z||"").then((function(e){!1===e&&M(!0)})).catch((function(e){console.log(e)}))}),[]),(0,r.jsx)(o.u,{opened:P,title:"Register",centered:!0,onClose:function(){return n.push("/")},children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.x,{size:"sm",children:"Register with the user name to proceed"}),(0,r.jsx)(c.o,{placeholder:"User name",label:"User name",required:!0,disabled:_,error:S&&N,onChange:function(e){return m(e.target.value)},onFocus:function(){return E("")}}),_&&(0,r.jsx)(l.a,{}),(0,r.jsx)(f.Z,{position:"right",children:(0,r.jsx)(d.z,{mt:"sm",onClick:A,loading:_,children:"Register"})})]})})},b=function(){(0,i.useRouter)();var e=(0,h.useState)(!1),n=e[0],t=e[1],u=(0,v.Nr)(),s=u.Moralis,o=u.web3,a=(s.web3Library,(0,v.Ab)().account);(0,h.useEffect)((function(){new w.CH(p.i.n,g.Mt,null===o||void 0===o?void 0:o.getSigner()).isRegistered(a||"").then((function(e){!1===e&&t(!0)})).catch((function(e){console.log(e)}))}),[]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(m,{open:n})})}}},function(e){e.O(0,[774,888,179],(function(){return n=41152,e(e.s=n);var n}));var n=e.O();_N_E=n}]);